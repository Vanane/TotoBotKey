build: clean
	python3 _build_check.py
#	python3 -m build

pub: publish
publish:
	python3 -m twine upload dist/*

# Install built packages in the local venv
install:
	find dist/*.whl
	python3 -m pip install dist/*.whl --force-reinstall

clean:
# '-' discards errors
# Twine directories
	- rm -rf ./dist
# egg-info, idk
	- rm -rf ./TotoBotRec.egg-info
# Python cache
	- for f in $$(find -name *__pycache__); do rm -rf "$$f"; done
# keys dump generated by TotoBotKey
	- for f in $$(find -name *input-event-codes.h); do rm -f "$$f"; done